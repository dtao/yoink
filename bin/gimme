#!/usr/bin/env node

var commander = require('commander'),
    fs = require('fs'),
    path = require('path'),
    gimme = require('../gimme');

var pkgpath = path.join(__dirname, '..', 'package.json'),
    pkginfo = JSON.parse(fs.readFileSync(pkgpath));

commander
  .version(pkginfo.version)
  .usage('[options] <url>')
  .option('-q, --query <query>', 'e.g., "foo.bar" -> {foo: {bar: <value> }}')
  .option('-l, --limit <limit>', 'max number of results you want (only applies to arrays)')
  .parse(process.argv);

if (process.argv.length < 3) {
  commander.help();
}

gimme(process.argv.pop(), commander);
